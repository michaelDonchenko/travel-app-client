(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{130:function(e,a,t){},161:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(15),o=t.n(s),c=(t(130),t(16)),i=t(17),l=t.n(i);l.a.defaults.withCredentials=!0;const d="https://travel-app-01.herokuapp.com/api",j=async()=>await l.a.get("".concat(d,"/get-pins")),p=Object(c.b)("map/createNewPin",(async(e,{rejectWithValue:a})=>{try{const{data:a}=await(async e=>await l.a.post("".concat(d,"/create-pin"),e))(e);return a}catch(t){return a(t.response.data)}})),u=Object(c.b)("map/getPins",(async()=>{try{const{data:e}=await j();return e}catch(e){console.log(e.response.data.message)}})),m=Object(c.b)("map/getPin",(async(e,{rejectWithValue:a})=>{try{const{data:a}=await(async e=>await l.a.get("".concat(d,"/get-pin/").concat(e)))(e);return a}catch(t){return a(t.response.data)}})),b=Object(c.b)("map/getComments",(async(e,{rejectWithValue:a})=>{try{const{data:a}=await(async e=>await l.a.get("".concat(d,"/get-comments/").concat(e)))(e);return a}catch(t){return a(t.response.data)}})),g=Object(c.b)("map/createComment",(async(e,{rejectWithValue:a})=>{try{const{data:a}=await(async e=>await l.a.post("".concat(d,"/add-comment"),e))(e);return a}catch(t){return a(t.response.data)}})),h=Object(c.b)("map/removeComment",(async(e,{rejectWithValue:a})=>{try{const{data:a}=await(async e=>await l.a.delete("".concat(d,"/delete-comment/").concat(e.pinId,"/").concat(e.commentId)))(e);return a}catch(t){return a(t.response.data)}})),O=Object(c.b)("map/getRating",(async(e,{rejectWithValue:a})=>{try{const{data:a}=await(async e=>await l.a.get("".concat(d,"/get-rating/").concat(e)))(e);return a}catch(t){return a(t.response.data)}})),x=Object(c.b)("map/addRating",(async(e,{rejectWithValue:a})=>{try{const{data:a}=await(async e=>await l.a.post("".concat(d,"/add-rating"),e))(e);return a}catch(t){return a(t.response.data)}})),y=Object(c.b)("map/removeMarker",(async(e,{rejectWithValue:a})=>{try{await(async e=>await l.a.delete("".concat(d,"/delete-pin/").concat(e)))(e);const{data:a}=await j();return a}catch(t){return a(t.response.data)}})),v={viewport:{width:"100%",height:"100vh",latitude:42.526,longitude:15.2551,zoom:4,transitionInterpolator:"",transitionDuration:""},windowWidth:window.innerWidth,markers:[],currentMarker:null,loading:!1,error:!1,success:!0,pinId:null,currentPin:null,comments:[],rating:[]},w=Object(c.c)({name:"map",initialState:v,reducers:{setCurrentMarker:(e,{payload:a})=>{e.currentMarker=a},setViewport:(e,{payload:a})=>{e.viewport.latitude=a.latitude,e.viewport.longitude=a.longitude,e.viewport.zoom=a.zoom,e.viewport.transitionInterpolator=a.transitionInterpolator||"",e.viewport.transitionDuration=a.transitionDuration||""},setPinId:(e,{payload:a})=>{e.pinId=a},resetPinId:(e,{payload:a})=>{e.pinId=null},resetError:(e,{payload:a})=>{e.error=null},windowResizer:(e,{payload:a})=>{e.windowWidth=a}},extraReducers:{[p.pending]:(e,{payload:a})=>{e.loading=!0},[p.fulfilled]:(e,{payload:a})=>{e.loading=!1,e.success=!0,e.error=!1},[p.rejected]:(e,{payload:a})=>{e.loading=!1,e.error=a.message},[u.pending]:(e,{payload:a})=>{e.loading=!0},[u.fulfilled]:(e,{payload:a})=>{e.loading=!1,e.markers=a.pins},[u.rejected]:(e,{payload:a})=>{e.loading=!0,e.error=a,e.markers=[]},[m.pending]:(e,{payload:a})=>{e.loading=!0},[m.fulfilled]:(e,{payload:a})=>{e.loading=!1,e.currentPin=a.pin},[m.rejected]:(e,{payload:a})=>{e.loading=!1,e.error=a.message},[b.pending]:(e,{payload:a})=>{e.loading=!0},[b.fulfilled]:(e,{payload:a})=>{e.loading=!1,e.comments=a.comments.comments},[b.rejected]:(e,{payload:a})=>{e.loading=!1,e.error=a.message},[g.pending]:(e,{payload:a})=>{e.loading=!0},[g.fulfilled]:(e,{payload:a})=>{e.loading=!1,e.comments=a.comments.comments},[g.rejected]:(e,{payload:a})=>{e.loading=!1,e.error=a.message},[h.pending]:(e,{payload:a})=>{e.loading=!0},[h.fulfilled]:(e,{payload:a})=>{e.loading=!1,e.comments=a.comments.comments},[h.rejected]:(e,{payload:a})=>{e.loading=!1,e.error=a.message},[O.pending]:(e,{payload:a})=>{e.loading=!0},[O.fulfilled]:(e,{payload:a})=>{e.loading=!1,e.rating=a.rating.ratings},[O.rejected]:(e,{payload:a})=>{e.loading=!1,e.error=a.message},[x.pending]:(e,{payload:a})=>{e.loading=!0},[x.fulfilled]:(e,{payload:a})=>{e.loading=!1,e.rating=a.rating.ratings},[x.rejected]:(e,{payload:a})=>{e.loading=!1,e.error=a.message},[y.pending]:(e,{payload:a})=>{e.loading=!0},[y.fulfilled]:(e,{payload:a})=>{e.loading=!1,e.markers=a.pins},[y.rejected]:(e,{payload:a})=>{e.loading=!1,e.error=a.message}}}),{setCurrentMarker:f,setViewport:C,setPinId:k,resetPinId:N,resetError:I,windowResizer:W}=w.actions,S=e=>e.map;var M=w.reducer;const P=Object(c.c)({name:"modal",initialState:{loginModal:!1,registerModal:!1,aboutModal:!1},reducers:{openLoginModal:(e,{payload:a})=>{e.loginModal=!0},closeLoginModal:e=>{e.loginModal=!1},openRegisterModal:(e,{payload:a})=>{e.registerModal=!0},closeRegisterModal:e=>{e.registerModal=!1},openAboutModal:(e,{payload:a})=>{e.aboutModal=!0},closeAboutModal:e=>{e.aboutModal=!1}},extraReducers:{}}),{openLoginModal:D,openRegisterModal:E,closeLoginModal:z,closeRegisterModal:F,openAboutModal:L,closeAboutModal:V}=P.actions,R=e=>e.modal;var B=P.reducer;l.a.defaults.withCredentials=!0;const A="https://travel-app-01.herokuapp.com/api",T=Object(c.b)("auth/login",(async(e,{rejectWithValue:a})=>{try{const{data:a}=await(async e=>await l.a.post("".concat(A,"/login"),e))(e);return a}catch(t){return a(t.response.data)}})),H=Object(c.b)("auth/register",(async(e,{rejectWithValue:a})=>{try{const{data:a}=await(async e=>await l.a.post("".concat(A,"/register"),e))(e);return a}catch(t){return a(t.response.data)}})),Y=Object(c.b)("auth/logout",(async(e,{rejectWithValue:a})=>{try{const{data:e}=await(async()=>await l.a.post("".concat(A,"/logout")))();return e}catch(t){return a(t.response.data)}})),_=Object(c.b)("auth/getForgotPassword",(async(e,{rejectWithValue:a})=>{try{const{data:a}=await(async e=>await l.a.post("".concat(A,"/forgot-password"),{email:e}))(e);return a}catch(t){return a(t.response.data)}})),G=Object(c.b)("auth/resetPasswordValidation",(async(e,{rejectWithValue:a})=>{try{const{data:a}=await(async e=>await l.a.get("".concat(A,"/password-reset-validation/").concat(e)))(e);return a}catch(t){return a(t.response.data)}})),U=Object(c.b)("auth/createResetPassword",(async(e,{rejectWithValue:a})=>{try{const{data:a}=await(async e=>await l.a.post("".concat(A,"/password-reset-action"),e))(e);return a}catch(t){return a(t.response.data)}}));var Z=t(54);const J=new Z.a,K={user:J.get("user")?J.get("user"):null,loading:!1,error:null,message:null,resetPasswordSuccess:null,resetPasswordError:null},Q=Object(c.c)({name:"auth",initialState:K,reducers:{resetMessage:e=>{e.message=null},resetError:e=>{e.error=null}},extraReducers:{[T.pending]:(e,{payload:a})=>{e.loading=!0},[T.fulfilled]:(e,{payload:a})=>{e.loading=!1,e.user=a.user,e.message=a.message,a.error=null},[T.rejected]:(e,{payload:a})=>{e.loading=!1,a.errors?e.error=a.errors[0].msg:e.error=a.message},[Y.pending]:(e,{payload:a})=>{e.loading=!0},[Y.fulfilled]:(e,{payload:a})=>{e.loading=!1,e.message=a.message,e.user=null,a.error=null},[Y.rejected]:(e,{payload:a})=>{e.loading=!1,e.error=a},[H.pending]:(e,{payload:a})=>{e.loading=!0},[H.fulfilled]:(e,{payload:a})=>{e.loading=!1,e.message=a.message,a.error=null},[H.rejected]:(e,{payload:a})=>{e.loading=!1,a.errors?e.error=a.errors[0].msg:e.error=a.message},[_.pending]:(e,{payload:a})=>{e.loading=!0},[_.fulfilled]:(e,{payload:a})=>{e.loading=!1,e.message=a.message,a.error=null},[_.rejected]:(e,{payload:a})=>{e.loading=!1,e.error=a.message},[G.pending]:(e,{payload:a})=>{e.loading=!0},[G.fulfilled]:(e,{payload:a})=>{e.loading=!1,e.resetPasswordSuccess=a.message,a.resetPasswordError=null},[G.rejected]:(e,{payload:a})=>{e.loading=!1,e.resetPasswordError=a.message},[U.pending]:(e,{payload:a})=>{e.loading=!0},[U.fulfilled]:(e,{payload:a})=>{e.loading=!1,e.message=a.message,a.error=null},[U.rejected]:(e,{payload:a})=>{e.loading=!1,e.error=a.message}}}),{resetMessage:X,resetError:q}=Q.actions,$=e=>e.auth;var ee=Q.reducer;l.a.defaults.withCredentials=!0;const ae="https://travel-app-01.herokuapp.com/api",te=Object(c.b)("auth/addImages",(async(e,{rejectWithValue:a})=>{try{const{data:a}=await(async e=>await l.a.post("".concat(ae,"/upload-images"),e))(e);return a}catch(t){return a(t.response.data)}})),ne=Object(c.b)("auth/getImages",(async(e,{rejectWithValue:a})=>{try{const{data:a}=await(async e=>await l.a.get("".concat(ae,"/get-images/").concat(e)))(e);return a}catch(t){return a(t.response.data)}})),re=Object(c.b)("auth/removeImage",(async(e,{rejectWithValue:a})=>{try{const{data:a}=await(async e=>await l.a.delete("".concat(ae,"/delete-image"),{data:e}))(e);return a}catch(t){return a(t.response.data)}})),se=Object(c.c)({name:"cloudinary",initialState:{images:[],loading:!1,error:!1},reducers:{returnError:(e,{payload:a})=>{e.error=a},resetError:(e,{payload:a})=>{e.error=null}},extraReducers:{[te.pending]:(e,{payload:a})=>{e.loading=!0},[te.fulfilled]:(e,{payload:a})=>{e.loading=!1,e.images=a.pinImages.images,e.error=!1},[te.rejected]:(e,{payload:a})=>{e.loading=!1,e.error=a.message},[ne.pending]:(e,{payload:a})=>{e.loading=!0},[ne.fulfilled]:(e,{payload:a})=>{e.loading=!1,e.images=a.pinImages.images?a.pinImages.images:[],e.error=!1},[ne.rejected]:(e,{payload:a})=>{e.loading=!1,e.error=a.message},[re.pending]:(e,{payload:a})=>{e.loading=!0},[re.fulfilled]:(e,{payload:a})=>{e.loading=!1,e.images=a.pinImages.images,e.error=!1},[re.rejected]:(e,{payload:a})=>{e.loading=!1,e.error=a.message}}}),{returnError:oe,resetError:ce}=se.actions,ie=e=>e.cloudinary;var le=se.reducer;const de=Object(c.a)({reducer:{map:M,modal:B,auth:ee,cloudinary:le}});var je=t(9),pe=t(215),ue=t(218),me=t(217),be=t(3);var ge=()=>{const e=Object(je.c)($),{message:a}=e,t=Object(je.b)();return Object(be.jsx)(ue.a,{open:a,autoHideDuration:6e3,onClose:()=>{t(X())},children:Object(be.jsx)(me.a,{onClose:()=>{t(X())},severity:"success",children:a})})};var he=()=>{const e=Object(je.c)($),{error:a}=e,t=Object(je.b)();return Object(be.jsx)(ue.a,{open:a,autoHideDuration:6e3,onClose:()=>t(q()),children:Object(be.jsx)(me.a,{onClose:()=>t(q()),severity:"error",children:a})})},Oe=t(207),xe=t(163),ye=t(212),ve=t(53),we=t(104),fe=t.n(we),Ce=t(219);var ke=({viewport:e,long:a,lat:t,marker:n})=>{const r=Object(je.b)();let s={latitude:t,longitude:a,zoom:11,transitionDuration:1e3};return Object(be.jsx)(ve.a,{onClick:async()=>{await r(C(s)),setTimeout((()=>r(k(n._id))),1200)},latitude:t,longitude:a,offsetLeft:-3.5*e.zoom,offsetTop:-7*e.zoom,children:Object(be.jsx)(Ce.a,{title:null===n||void 0===n?void 0:n.placeName,children:Object(be.jsx)(fe.a,{style:{fontSize:7*e.zoom,color:"crimson",cursor:"pointer"}})})})},Ne=t(203);var Ie=Object(Ne.a)((e=>({toolBar:{minHeight:"40px"},menuButton:{margin:"1rem",display:"flex",width:"150px",fontWeight:"600",fontSize:"1rem"},mapPopup:{padding:e.spacing(2)},popupButton:{margin:e.spacing(2,"auto"),padding:e.spacing(1,3),display:"flex",width:"fit-content",fontWeight:"600",fontSize:"1rem"},inputField:{width:"350px",margin:e.spacing(2,"auto"),maxWidth:"90%"},flexCenter:{display:"flex",flexDirection:"column",justifyContent:"center"},modalLink:{color:"#263238",fontWeight:"600",margin:e.spacing(0,1),"&:hover":{textDecoration:"underline",cursor:"pointer"}},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}))),We=t(220);var Se,Me,Pe,De,Ee,ze=({long:e,lat:a})=>{const t=Ie(),r=Object(je.b)(),s=()=>{r(f(null))},[o,c]=Object(n.useState)("");return Object(be.jsx)(ve.b,{className:t.mapPopup,anchor:"left",latitude:a,longitude:e,closeOnClick:!1,onClose:()=>{s()},children:Object(be.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),await r(p({long:e,lat:a,placeName:o})),s(),c(""),await r(u())},children:[Object(be.jsx)(We.a,{label:"Place name",type:"text",values:o,onChange:e=>c(e.target.value)}),Object(be.jsx)(Oe.a,{className:t.popupButton,type:"submit",variant:"contained",color:"primary",children:"Submit"})]})})},Fe=t(209),Le=t(210),Ve=t(164),Re=t(58),Be=t(59);const Ae=Be.a.button(Se||(Se=Object(Re.a)(["\n  background-color: white;\n  color: ",";\n  font-size: 1em;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border: 2px solid ",";\n  border-radius: 3px;\n  width: 150px;\n\n  &:hover {\n    cursor: pointer;\n    background: ",";\n    color: white;\n  }\n"])),(e=>e.primary?"Black":"Crimson"),(e=>e.primary?"Black":"Crimson"),(e=>e.primary?"Black":"Crimson")),Te=Be.a.div(Me||(Me=Object(Re.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),He=Be.a.div(Pe||(Pe=Object(Re.a)(["\n  display: ",";\n  margin: 10px 0;\n  padding: 10px;\n"])),(e=>Number(e.value)===e.number?"flex":"none")),Ye=Be.a.svg(De||(De=Object(Re.a)(["\n  color: ",";\n  height: 20px;\n  width: 20px;\n  float: right;\n  margin: 0 5px;\n  &:hover {\n    cursor: pointer;\n    background-color: azure;\n  }\n"])),(e=>e.color)),_e=Be.a.div(Ee||(Ee=Object(Re.a)(["\n  display: ",";\n  margin: 10px 0;\n  padding: 10px;\n  flex-direction: column;\n"])),(e=>e.show?"flex":"none"));var Ge=({show:e})=>{const[a,t]=Object(n.useState)(),r=Ie(),s=Object(je.b)();return Object(be.jsxs)(_e,{show:e,children:[Object(be.jsx)("p",{style:{padding:"10px",color:"gray"},children:"Type your email in order to get password reset link"}),Object(be.jsx)("form",{style:{display:"flex",justifyContent:"center"},children:Object(be.jsx)(We.a,{fullWidth:!0,label:"Email",type:"email",variant:"standard",name:"email",value:a,onChange:e=>t(e.target.value),className:r.inputField})}),Object(be.jsx)(Ae,{onClick:async e=>{e.preventDefault(),s(_(a))},type:"submit",children:"Send"})]})},Ue=t(108),Ze=t.n(Ue),Je=t(208),Ke=t(201);var Qe=({handleClsoe:e})=>Object(be.jsx)(Je.a,{children:Object(be.jsx)(Ke.a,{edge:"start",color:"inherit",onClick:e,"aria-label":"close",children:Object(be.jsx)(Ze.a,{})})});var Xe=()=>{const e=new Z.a,a=Ie(),t=Object(je.b)(),r=Object(je.c)(R),s=Object(je.c)($),o=Object(je.c)(S),{loginModal:c}=r,{user:i,loading:l,message:d}=s,{windowWidth:j}=o,[p,u]=Object(n.useState)({username:"",password:""}),{username:m,password:b}=p,[g,h]=Object(n.useState)(!1),O=e=>{u({...p,[e.target.name]:e.target.value})},x=()=>{t(z())};return"Logged in succefully"===d&&(e.set("user",i),x()),Object(be.jsxs)(Fe.a,{onClose:x,open:c,fullScreen:j<600,children:[j<600&&Object(be.jsx)(Qe,{handleClsoe:x}),Object(be.jsx)(Le.a,{children:Object(be.jsx)(Ve.a,{variant:"h6",align:"center",children:"Login"})}),Object(be.jsxs)("div",{children:[Object(be.jsxs)("form",{className:a.flexCenter,onSubmit:e=>{e.preventDefault(),t(T(p))},children:[Object(be.jsx)(We.a,{fullWidth:!0,label:"Username",name:"username",value:m,type:"text",variant:"standard",onChange:O,className:a.inputField}),Object(be.jsx)(We.a,{fullWidth:!0,label:"Password",type:"password",variant:"standard",name:"password",value:b,onChange:O,className:a.inputField}),Object(be.jsx)(Oe.a,{variant:"contained",color:"primary",type:"submit",className:a.popupButton,children:l?"Loading...":"Login"})]}),Object(be.jsxs)("p",{className:a.inputField,children:["Don't have an account?",Object(be.jsx)("span",{onClick:()=>{t(z()),t(E())},className:a.modalLink,children:"Register"})]}),Object(be.jsxs)("p",{className:a.inputField,children:["Can't login? click",Object(be.jsx)("span",{onClick:()=>h(!g),className:a.modalLink,children:"Here"})]})]}),Object(be.jsx)(Ge,{show:g})]})};var qe=()=>{const e=Ie(),a=Object(je.b)(),t=Object(je.c)(R),r=Object(je.c)($),{registerModal:s}=t,{message:o,loading:c}=r,[i,l]=Object(n.useState)({username:"",password:"",email:""}),{username:d,password:j,email:p}=i,u=e=>{l({...i,[e.target.name]:e.target.value})},m=()=>{a(F())};o&&m();const b=Object(je.c)(S),{windowWidth:g}=b;return Object(be.jsxs)(Fe.a,{onClose:m,open:s,fullScreen:g<600,children:[g<600&&Object(be.jsx)(Qe,{handleClsoe:m}),Object(be.jsx)(Le.a,{children:Object(be.jsx)(Ve.a,{variant:"h6",align:"center",children:"Register"})}),Object(be.jsxs)("div",{children:[Object(be.jsxs)("form",{className:e.flexCenter,onSubmit:e=>{e.preventDefault(),a(H(i))},children:[Object(be.jsx)(We.a,{fullWidth:!0,label:"Username",type:"text",variant:"standard",name:"username",value:d,onChange:u,className:e.inputField}),Object(be.jsx)(We.a,{fullWidth:!0,label:"Email",type:"email",variant:"standard",name:"email",value:p,onChange:u,className:e.inputField}),Object(be.jsx)(We.a,{fullWidth:!0,label:"Password",type:"password",variant:"standard",name:"password",value:j,onChange:u,className:e.inputField}),Object(be.jsx)(Oe.a,{variant:"contained",color:"primary",type:"submit",className:e.popupButton,children:c?"Loading...":"Register"})]}),Object(be.jsxs)("p",{className:e.inputField,children:["Already have account?",Object(be.jsx)("span",{onClick:()=>{a(F()),a(D())},className:e.modalLink,children:"Login"})]})]})]})},$e=t(112),ea=t.n($e),aa=t(213);var ta=Object(Ne.a)((e=>({commentsDiv:{maxHeight:"350px",overflowY:"auto",padding:e.spacing(1),margin:e.spacing(1,0)},imagesDiv:{maxHeight:"500px",overflowY:"auto",width:"100%",padding:e.spacing(1),margin:e.spacing(1,0),display:"flex",flexWrap:"wrap"},imgDiv:{width:"100%",display:"flex",justifyContent:"center",padding:"5px"},img:{margin:"5px auto",maxWidth:"95%","&:hover":{cursor:"auto"}},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},badge:{position:"relative",marginRight:"15px",display:"flex","&:hover":{cursor:"pointer"}},header:{margin:e.spacing(4,0)}}))),na=t(109),ra=t.n(na),sa=t(162),oa=t(110),ca=t.n(oa);var ia=({comment:e})=>{const{body:a,postedBy:t,createdAt:n,createdBy:r,_id:s}=e,o=Object(je.c)($),c=Object(je.c)(S),{pinId:i}=c,{user:l}=o,d=Object(je.b)();return Object(be.jsxs)(sa.a,{style:{marginBottom:"15px",padding:"5px"},elevation:3,children:[Object(be.jsx)(Ve.a,{variant:"h6",children:"".concat(t,"'s comment:")}),Object(be.jsx)(Ve.a,{style:{margin:"5px 0"},variant:"subtitle1",children:a}),Object(be.jsxs)(Ve.a,{variant:"subtitle1",style:{color:"GrayText"},children:[ra()(n).format("MMMM Do YYYY"),(null===l||void 0===l?void 0:l._id)===r&&Object(be.jsx)(Ye,{onClick:()=>{if(window.confirm("Are you sure you wnat to delete this message?"))return d(h({pinId:i,commentId:s}))},color:"crimson",children:Object(be.jsx)(ca.a,{})})]})]})};var la=()=>{const e=Ie(),[a,t]=Object(n.useState)(""),r=Object(je.b)(),s=Object(je.c)(S),{pinId:o}=s;return Object(be.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(g({pinId:o,body:a}))},children:[Object(be.jsx)(We.a,{className:e.inputField,type:"text",placeholder:"Comment",value:a,onChange:e=>t(e.target.value)}),Object(be.jsx)(Ae,{type:"submit",primary:!0,children:"Submit"})]})},da=t(111),ja=t.n(da);var pa=()=>{const e=Object(je.b)(),[a,t]=Object(n.useState)(""),r=Object(je.c)(S),{pinId:s,loading:o}=r,c=async a=>{await e(te({image:a,pinId:s}))};return Object(be.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),a.length>3)return e(oe("Please don't uplaod more than 3 images at once."));if(a)for(let e=0;e<a.length;e++)ja.a.imageFileResizer(a[e],500,500,"auto",100,0,(e=>{c(e)}),"base64")},children:[Object(be.jsx)("input",{style:{fontSize:"15px",display:"flex",padding:"10px 20px"},type:"file",accept:"image/*",name:"imagetoUpload",multiple:!0,onChange:e=>{t(e.target.files)}}),Object(be.jsx)(Ae,{primary:!0,children:o?"Loading...":"Submit"})]})},ua=t(211),ma=t(206),ba=t(222),ga=t(216),ha=t(223);var Oa=()=>{const e=Ie(),a=Object(je.b)(),[t,r]=Object(n.useState)(""),s=Object(je.c)(S),{pinId:o}=s;return Object(be.jsx)("form",{onSubmit:e=>{e.preventDefault(),a(x({pinId:o,value:t}))},children:Object(be.jsxs)(ma.a,{children:[Object(be.jsx)(ba.a,{id:"demo-simple-select-label",children:"Rate"}),Object(be.jsxs)(ga.a,{className:e.inputField,labelId:"demo-simple-select-label",id:"demo-simple-select",value:t,onChange:e=>{r(e.target.value)},children:[Object(be.jsx)(ha.a,{value:1,children:"1"}),Object(be.jsx)(ha.a,{value:2,children:"2"}),Object(be.jsx)(ha.a,{value:3,children:"3"}),Object(be.jsx)(ha.a,{value:4,children:"4"}),Object(be.jsx)(ha.a,{value:5,children:"5"})]}),Object(be.jsx)(Ae,{type:"submit",primary:!0,children:"Submit"})]})})};var xa=()=>{const[e,a]=Object(n.useState)(0),t=Object(je.c)($),{user:r}=t,s=e=>{a(e.target.value)};return Object(be.jsxs)(Te,{children:[r?Object(be.jsxs)(be.Fragment,{children:[Object(be.jsxs)("div",{children:[Object(be.jsx)(Ae,{onClick:s,value:1,children:"Add comment"}),Object(be.jsx)(Ae,{onClick:s,value:2,children:"Add photo"}),Object(be.jsx)(Ae,{onClick:s,value:3,children:"Add rating"})]}),Object(be.jsx)(ua.a,{})]}):Object(be.jsx)(Ve.a,{style:{margin:"10px 0",padding:"10px",color:"GrayText"},variant:"subtitle1",children:"Only logged in users are able to add comments/photos/rating."}),Object(be.jsxs)("div",{children:[Object(be.jsx)(He,{value:e,number:1,children:Object(be.jsx)(la,{})}),Object(be.jsx)(He,{value:e,number:2,children:Object(be.jsx)(pa,{})}),Object(be.jsx)(He,{value:e,number:3,children:Object(be.jsx)(Oa,{})})]})]})},ya=t(224);var va=()=>{const e=ta(),a=Object(je.c)(S),t=Object(je.c)($),r=Object(je.c)(ie),{pinId:s,loading:o,currentPin:c,comments:i,rating:l,windowWidth:d}=a,{user:j}=t,{loading:p,images:u}=r,g=Object(je.b)();Object(n.useEffect)((()=>null!==s&&g(m(s))),[s]),Object(n.useEffect)((()=>null!==s&&g(b(s))),[s]),Object(n.useEffect)((()=>null!==s&&g(ne(s))),[s]),Object(n.useEffect)((()=>null!==s&&g(O(s))),[s]);const h=function(){const e=l.map((e=>e.value));return e.reduce(((e,a)=>e+a))/e.length};return o||p?Object(be.jsx)(xe.a,{className:e.backdrop,open:o||p,children:Object(be.jsx)(ye.a,{color:"inherit"})}):Object(be.jsxs)(Fe.a,{onClose:()=>g(N()),open:s,fullScreen:d<600,children:[d<600&&Object(be.jsx)(Qe,{handleClsoe:()=>g(N())}),Object(be.jsxs)(Le.a,{className:e.modal,children:[Object(be.jsxs)(Ve.a,{variant:"h5",style:{display:"flex",alignItems:"center"},children:[Object(be.jsxs)("span",{style:{flex:1},children:[" ",null===c||void 0===c?void 0:c.placeName]}),Object(be.jsx)(ya.a,{name:"simple-controlled",value:l&&l.length>0?h().toFixed(1):0,readOnly:!0,precision:.5}),Object(be.jsx)("span",{style:{marginLeft:"7px"},children:"(".concat(l&&l.length>0?h().toFixed(1):"No ratings",")")})]}),l&&l.length&&Object(be.jsx)(Ve.a,{style:{float:"right",color:"GrayText"},variant:"subtitle1",children:"from ".concat(l.length," ratings")})]}),j&&"admin"===j.role&&Object(be.jsx)(Ae,{style:{width:"200px"},variant:"contained",fullWidth:!0,onClick:async()=>{window.confirm("Are you sure you wnat to delete this marker?")&&(await g(y(s)),g(N()))},children:"Delete this marker"}),Object(be.jsx)("div",{className:e.imagesDiv,children:(null===u||void 0===u?void 0:u.length)>0?u.map(((a,t)=>Object(be.jsx)("div",{className:e.imgDiv,children:(null===j||void 0===j?void 0:j._id)===a.createdBy?Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)("img",{className:e.img,src:a.url},t),Object(be.jsx)(aa.a,{onClick:()=>g(re({pinId:s,public_id:a.public_id})),className:e.badge,badgeContent:"Delete",color:"error"})]}):Object(be.jsx)("img",{className:e.img,src:a.url},t)}))):Object(be.jsx)("p",{children:"No images yet."})}),Object(be.jsx)("div",{className:e.commentsDiv,children:(null===i||void 0===i?void 0:i.length)>0?i.map(((e,a)=>Object(be.jsx)(ia,{comment:e},a))):Object(be.jsx)("p",{children:"No comments yet."})}),Object(be.jsx)(xa,{})]})};var wa=()=>{const e=Object(je.b)(),a=Object(je.c)(S),{error:t}=a;return Object(be.jsx)(ue.a,{open:t,autoHideDuration:6e3,onClose:()=>e(I()),children:Object(be.jsx)(me.a,{onClose:()=>e(I()),severity:"error",children:t})})};var fa=()=>{const e=Object(je.b)(),a=Object(je.c)(ie),{error:t}=a;return Object(be.jsx)(ue.a,{open:t,autoHideDuration:6e3,onClose:()=>e(ce()),children:Object(be.jsx)(me.a,{onClose:()=>e(ce()),severity:"error",children:t})})};var Ca=()=>{const e=Object(je.b)(),a=Object(je.c)(R),{aboutModal:t}=a,n=ta(),r=Object(je.c)(S),{windowWidth:s}=r,o=()=>{e(V())};return Object(be.jsxs)(Fe.a,{open:t,onClose:o,fullScreen:s<600,children:[s<600&&Object(be.jsx)(Qe,{handleClsoe:o}),Object(be.jsx)(Ve.a,{variant:"h4",align:"center",className:n.header,children:"Travel-App 101"}),Object(be.jsx)(Ve.a,{variant:"h6",align:"center",style:{padding:"7px"},children:"Have you ever wanted to share your favorite places with the world? Comment, upload images, or rate places you have been to? now it's all possible with Mike's travel app!"}),Object(be.jsxs)("div",{style:{padding:"10px"},children:[Object(be.jsx)("p",{children:"1. View all the places in the world by clicking on the markers on the map."}),Object(be.jsx)("p",{children:"2. Register a new account and loggin to be able to create new markers!"}),Object(be.jsx)("p",{children:"3. Creating a marker is done by double clicking the map, choose a place you want to mark and just double click it! (make sure you logged in)"}),Object(be.jsx)("p",{children:"4. You can post comments ratings and images on other people's markers as well."}),Object(be.jsx)("p",{children:"5. Don't worry you can delete your comments and photos later if you change your mind..."}),Object(be.jsx)("p",{children:"6. Enjoy your time."}),Object(be.jsx)("p",{style:{color:"gray",marginTop:"15px"},children:"Please note that if needed the admim can delete any marker on the map and all the images and comments will be deleted too.."})]})]})};t(157);var ka=function(){const e=Object(je.b)(),a=Ie(),t=new Z.a,r=Object(je.c)(S),s=Object(je.c)($),{user:o,loading:c}=s,{currentMarker:i,markers:l,viewport:d,loading:j}=r;return Object(n.useEffect)((()=>e(u())),[]),Object(be.jsx)(be.Fragment,{children:Object(be.jsxs)(ve.c,{onDblClick:a=>(a=>{o&&e(f({long:a.lngLat[0],lat:a.lngLat[1]}))})(a),...d,mapboxApiAccessToken:"pk.eyJ1IjoibWljaGFlbDE5OTRkIiwiYSI6ImNrbzcwdDVycTBrZXUycHBkYWZkczluc3EifQ.PZCZLHv0WlK_AKdI3pInuw",mapStyle:"mapbox://styles/mapbox/streets-v11",onViewportChange:a=>e(C(a)),children:[i&&Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(ke,{viewport:d,long:Number(i.long),lat:Number(i.lat)}),Object(be.jsx)(ze,{long:Number(i.long),lat:Number(i.lat)})]}),l.length>0&&l.map(((e,a)=>Object(be.jsx)(ke,{viewport:d,long:Number(e.long),lat:Number(e.lat),marker:e},a))),o?Object(be.jsx)(Oe.a,{className:a.menuButton,variant:"contained",color:"primary",onClick:async()=>{await e(Y()),t.remove("user")},endIcon:Object(be.jsx)(ea.a,{}),children:"Logout"}):Object(be.jsx)(Oe.a,{className:a.menuButton,variant:"contained",color:"primary",onClick:()=>e(D()),children:"login"}),Object(be.jsx)(Oe.a,{className:a.menuButton,variant:"contained",color:"secondary",onClick:()=>e(L()),children:"About"}),Object(be.jsx)(Xe,{}),Object(be.jsx)(qe,{}),Object(be.jsx)(va,{}),Object(be.jsx)(Ca,{}),Object(be.jsx)(xe.a,{className:a.backdrop,open:c||j,children:Object(be.jsx)(ye.a,{color:"inherit"})}),Object(be.jsx)(wa,{}),Object(be.jsx)(fa,{})]})})},Na=t(113);var Ia=Object(Na.a)({palette:{primary:{main:"#000000"},secondary:{main:"#DC143C"}}}),Wa=t(79),Sa=t(21),Ma=t(214);var Pa=()=>{const e=Ie(),a=Object(je.b)(),t=Object(je.c)($),{resetPasswordSuccess:r,resetPasswordError:s,loading:o,error:c,message:i}=t,l=Object(Sa.f)(),{token:d}=l,[j,p]=Object(n.useState)({password:"",confirmPassword:""}),{password:u,confirmPassword:m}=j,b=e=>{p({...j,[e.target.name]:e.target.value})};return Object(n.useEffect)((()=>a(G(d))),[]),Object(be.jsx)("div",{children:Object(be.jsxs)(Ma.a,{maxWidth:"sm",children:[Object(be.jsx)(Ve.a,{variant:"h5",align:"center",style:{margin:"20px 0"},children:"Reset password page"}),o&&Object(be.jsx)(xe.a,{className:e.backdrop,open:o,children:Object(be.jsx)(ye.a,{color:"inherit"})}),r&&Object(be.jsx)("form",{onSubmit:async e=>{e.preventDefault(),await a(U({password:u,confirmPassword:m,resetPasswordToken:d}))},children:Object(be.jsxs)(Te,{children:[Object(be.jsx)(Ve.a,{variant:"subtitle1",align:"center",style:{margin:"20px 0",color:"green"},children:r}),Object(be.jsx)(We.a,{fullWidth:!0,label:"New Password",type:"password",variant:"standard",name:"password",value:u,onChange:b,className:e.inputField}),Object(be.jsx)(We.a,{fullWidth:!0,label:"Confirm Password",type:"password",variant:"standard",name:"confirmPassword",value:m,onChange:b,className:e.inputField}),Object(be.jsx)(Ae,{style:{margin:"20px auto"},primary:!0,type:"submit",children:"Submit"})]})}),(()=>{if(c)return Object(be.jsx)(Ve.a,{variant:"subtitle1",align:"center",style:{margin:"20px 0",color:"red"},children:c})})(),(()=>{if(i)return Object(be.jsx)(Ve.a,{variant:"subtitle1",align:"center",style:{margin:"20px 0",color:"green"},children:i})})(),s&&Object(be.jsx)(Ve.a,{variant:"subtitle1",align:"center",style:{margin:"20px 0",color:"red"},children:s})]})})};var Da=()=>{const e=Object(je.b)(),a=()=>e(W(window.innerWidth));return Object(n.useEffect)((()=>(window.addEventListener("resize",a),()=>window.removeEventListener("resize",a))),[]),Object(be.jsx)(Wa.a,{children:Object(be.jsxs)(pe.a,{theme:Ia,children:[Object(be.jsxs)(Sa.c,{children:[Object(be.jsx)(Sa.a,{path:"/",exact:!0,component:ka}),Object(be.jsx)(Sa.a,{path:"/password-reset/:token",exact:!0,component:Pa})]}),Object(be.jsx)(ge,{}),Object(be.jsx)(he,{})]})})};o.a.render(Object(be.jsx)(r.a.StrictMode,{children:Object(be.jsx)(je.a,{store:de,children:Object(be.jsx)(Da,{})})}),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.56dfca37.chunk.js.map